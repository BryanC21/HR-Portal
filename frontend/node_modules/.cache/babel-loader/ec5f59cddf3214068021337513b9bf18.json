{"ast":null,"code":"var _jsxFileName = \"/Users/bryancaldera/CS MS/CMPE272_Group_Project/cmpe272_final_project/frontend/src/components/sso/signin.js\";\nimport React from 'react';\nimport { Button, Form } from \"react-bootstrap\";\nimport store from '../../store';\nimport { setUser } from '../../actions/userActions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Signin extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n  }\n\n  handlePhoneChange(e) {\n    this.setState({\n      phone: e.target.value\n    });\n  }\n\n  handlePasswordChange(e) {\n    this.setState({\n      password: e.target.value\n    });\n  }\n\n  handleSignin() {\n    const api = process.env.REACT_APP_API || \"http://192.168.56.1:4080\";\n    fetch(api + \"/login\", {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        'phone_number': this.state.phone,\n        'password': this.state.password\n      })\n    }).then(response => response.json()).then(data => {\n      if (data.code === 200) {\n        sessionStorage.setItem(\"token\", data.accessToken);\n        const user = {\n          id: data.userinfo[0].id,\n          phone: data.userinfo[0].phone_number,\n          firstName: data.userinfo[0].first_name,\n          lastName: data.userinfo[0].last_name,\n          level: data.userinfo[0].level,\n          token: data.accessToken\n        };\n        store.dispatch(setUser(user));\n\n        if (user.level === \"admin\") {\n          window.location.href = \"/\";\n        }\n      } else {\n        alert(data.message);\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(Form, {\n      children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-3\",\n        controlId: \"signinPhone\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Phone Number\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"phone\",\n          placeholder: \"Enter Phone Number\",\n          value: this.state.phone || '',\n          onChange: e => this.handlePhoneChange(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        className: \"mb-3\",\n        controlId: \"signinPassword\",\n        children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"password\",\n          placeholder: \"Password\",\n          value: this.state.password || '',\n          onChange: e => this.handlePasswordChange(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        onClick: () => this.handleSignin(),\n        children: \"Sign In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nexport default Signin;","map":{"version":3,"names":["React","Button","Form","store","setUser","Signin","Component","constructor","props","state","handlePhoneChange","e","setState","phone","target","value","handlePasswordChange","password","handleSignin","api","process","env","REACT_APP_API","fetch","method","headers","body","JSON","stringify","then","response","json","data","code","sessionStorage","setItem","accessToken","user","id","userinfo","phone_number","firstName","first_name","lastName","last_name","level","token","dispatch","window","location","href","alert","message","render"],"sources":["/Users/bryancaldera/CS MS/CMPE272_Group_Project/cmpe272_final_project/frontend/src/components/sso/signin.js"],"sourcesContent":["import React from 'react';\nimport { Button, Form } from \"react-bootstrap\";\nimport store from '../../store';\nimport { setUser } from '../../actions/userActions';\n\nclass Signin extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    handlePhoneChange(e) {\n        this.setState({ phone: e.target.value });\n    }\n    handlePasswordChange(e) {\n        this.setState({ password: e.target.value });\n    }\n    handleSignin() {\n        const api = process.env.REACT_APP_API || \"http://192.168.56.1:4080\"\n        fetch(api + \"/login\",\n            {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify({\n                    'phone_number': this.state.phone,\n                    'password': this.state.password,\n                }),\n            }\n        )\n            .then((response) => response.json())\n            .then((data) => {\n                if (data.code === 200) {\n                    sessionStorage.setItem(\"token\", data.accessToken);\n                    const user = {\n                        id: data.userinfo[0].id,\n                        phone: data.userinfo[0].phone_number,\n                        firstName: data.userinfo[0].first_name,\n                        lastName: data.userinfo[0].last_name,\n                        level: data.userinfo[0].level,\n                        token: data.accessToken,\n                    }\n                    store.dispatch(setUser(user));\n                    if (user.level === \"admin\") {\n                        window.location.href = \"/\";\n                    }\n                } else {\n                    alert(data.message);\n                }\n            });\n    }\n\n    render() {\n        return (\n            <Form>\n                <Form.Group className=\"mb-3\" controlId=\"signinPhone\">\n                    <Form.Label>Phone Number</Form.Label>\n                    <Form.Control type=\"phone\" placeholder=\"Enter Phone Number\" value={this.state.phone || ''} onChange={e => this.handlePhoneChange(e)} />\n                </Form.Group>\n\n                <Form.Group className=\"mb-3\" controlId=\"signinPassword\">\n                    <Form.Label>Password</Form.Label>\n                    <Form.Control type=\"password\" placeholder=\"Password\" value={this.state.password || ''} onChange={e => this.handlePasswordChange(e)} />\n                </Form.Group>\n                <Button variant=\"primary\" onClick={() => this.handleSignin()}>\n                    Sign In\n                </Button>\n            </Form>\n        )\n    }\n}\n\nexport default Signin;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}