{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bryancaldera/CS MS/CMPE272_Group_Project/cmpe272_final_project/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/bryancaldera/CS MS/CMPE272_Group_Project/cmpe272_final_project/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/bryancaldera/CS MS/CMPE272_Group_Project/cmpe272_final_project/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/bryancaldera/CS MS/CMPE272_Group_Project/cmpe272_final_project/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/Users/bryancaldera/CS MS/CMPE272_Group_Project/cmpe272_final_project/frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/Users/bryancaldera/CS MS/CMPE272_Group_Project/cmpe272_final_project/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/bryancaldera/CS MS/CMPE272_Group_Project/cmpe272_final_project/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import{NavDropdown}from'react-bootstrap';import{connect}from'react-redux';import store from\"../../store\";import{setUser}from\"../../actions/userActions\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var NavUser=/*#__PURE__*/function(_Component){_inherits(NavUser,_Component);var _super=_createSuper(NavUser);function NavUser(props){var _this;_classCallCheck(this,NavUser);_this=_super.call(this,props);_this.state={modalShow:false};_this.setModalShow=_this.setModalShow.bind(_assertThisInitialized(_this));return _this;}_createClass(NavUser,[{key:\"setModalShow\",value:function setModalShow(show){this.setState({modalShow:show});}},{key:\"handleLogout\",value:function(){var _handleLogout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var api,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:api=\"http://localhost:5002\";_context.next=3;return fetch(api+'/logout',{credentials:'include'});case 3:response=_context.sent;if(!(response.status===200)){_context.next=10;break;}_context.next=7;return store.dispatch(setUser({}));case 7:window.location.replace(\"https://trial-1322739.okta.com/login/signout\");_context.next=11;break;case 10:alert(response.statusText);case 11:case\"end\":return _context.stop();}}},_callee);}));function handleLogout(){return _handleLogout.apply(this,arguments);}return handleLogout;}()},{key:\"render\",value:function render(){var _this2=this;var user=this.props.user;return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(NavDropdown,{title:\"Admin\",id:\"basic-nav-dropdown\",children:/*#__PURE__*/_jsx(NavDropdown.Item,{href:\"#\",onClick:function onClick(){return _this2.handleLogout();},children:\"Log Out\"})})});}}]);return NavUser;}(Component);var mapStateToProps=function mapStateToProps(store){return{user:store.userState.user};};export default connect(mapStateToProps)(NavUser);","map":{"version":3,"names":["React","Component","NavDropdown","connect","store","setUser","NavUser","props","state","modalShow","setModalShow","bind","show","setState","api","fetch","credentials","response","status","dispatch","window","location","replace","alert","statusText","user","handleLogout","mapStateToProps","userState"],"sources":["/Users/bryancaldera/CS MS/CMPE272_Group_Project/cmpe272_final_project/frontend/src/components/nav/nav_user.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport { NavDropdown } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport store from \"../../store\";\nimport { setUser } from \"../../actions/userActions\";\n\nclass NavUser extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            modalShow: false,\n        };\n        this.setModalShow = this.setModalShow.bind(this);\n    }\n\n    setModalShow(show) {\n        this.setState({ modalShow: show });\n    }\n\n    async handleLogout() {\n        var api = \"http://localhost:5002\";\n        const response = await fetch(api + '/logout', { credentials: 'include' })\n        if (response.status === 200) {\n            await store.dispatch(setUser({}));\n            window.location.replace(\"https://trial-1322739.okta.com/login/signout\");\n        } else {\n            alert(response.statusText);\n        }\n    }\n\n    render() {\n        const user = this.props.user;\n        return (\n            <>\n                <NavDropdown title=\"Admin\" id=\"basic-nav-dropdown\">\n                    <NavDropdown.Item href=\"#\" onClick={() => this.handleLogout()}>Log Out</NavDropdown.Item>\n                </NavDropdown>\n            </>\n        );\n    }\n}\n\nconst mapStateToProps = store => {\n    return {\n        user: store.userState.user,\n    }\n}\n\nexport default connect(mapStateToProps)(NavUser);\n\n\n"],"mappings":"4oCAAA,MAAOA,MAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,WAAW,KAAQ,iBAAiB,CAC7C,OAASC,OAAO,KAAQ,aAAa,CACrC,MAAOC,MAAK,KAAM,aAAa,CAC/B,OAASC,OAAO,KAAQ,2BAA2B,CAAC,mGAE9CC,QAAO,kGACT,iBAAYC,KAAK,CAAE,yCACf,uBAAMA,KAAK,EACX,MAAKC,KAAK,CAAG,CACTC,SAAS,CAAE,KACf,CAAC,CACD,MAAKC,YAAY,CAAG,MAAKA,YAAY,CAACC,IAAI,+BAAM,CAAC,aACrD,CAAC,gDAED,sBAAaC,IAAI,CAAE,CACf,IAAI,CAACC,QAAQ,CAAC,CAAEJ,SAAS,CAAEG,IAAK,CAAC,CAAC,CACtC,CAAC,mHAED,sJACQE,GAAG,CAAG,uBAAuB,uBACVC,MAAK,CAACD,GAAG,CAAG,SAAS,CAAE,CAAEE,WAAW,CAAE,SAAU,CAAC,CAAC,QAAnEC,QAAQ,oBACVA,QAAQ,CAACC,MAAM,GAAK,GAAG,iDACjBd,MAAK,CAACe,QAAQ,CAACd,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,QACjCe,MAAM,CAACC,QAAQ,CAACC,OAAO,CAAC,8CAA8C,CAAC,CAAC,+BAExEC,KAAK,CAACN,QAAQ,CAACO,UAAU,CAAC,CAAC,uDAElC,oHAED,iBAAS,iBACL,GAAMC,KAAI,CAAG,IAAI,CAAClB,KAAK,CAACkB,IAAI,CAC5B,mBACI,sCACI,KAAC,WAAW,EAAC,KAAK,CAAC,OAAO,CAAC,EAAE,CAAC,oBAAoB,uBAC9C,KAAC,WAAW,CAAC,IAAI,EAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAE,yBAAM,OAAI,CAACC,YAAY,EAAE,EAAC,qBAA2B,EAC/E,EACf,CAEX,CAAC,qBAjCiBzB,SAAS,EAoC/B,GAAM0B,gBAAe,CAAG,QAAlBA,gBAAe,CAAGvB,KAAK,CAAI,CAC7B,MAAO,CACHqB,IAAI,CAAErB,KAAK,CAACwB,SAAS,CAACH,IAC1B,CAAC,CACL,CAAC,CAED,cAAetB,QAAO,CAACwB,eAAe,CAAC,CAACrB,OAAO,CAAC"},"metadata":{},"sourceType":"module"}