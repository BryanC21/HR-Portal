{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bryancaldera/CS MS/CMPE272_Group_Project/cmpe272_final_project/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/bryancaldera/CS MS/CMPE272_Group_Project/cmpe272_final_project/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/bryancaldera/CS MS/CMPE272_Group_Project/cmpe272_final_project/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/bryancaldera/CS MS/CMPE272_Group_Project/cmpe272_final_project/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/bryancaldera/CS MS/CMPE272_Group_Project/cmpe272_final_project/frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/bryancaldera/CS MS/CMPE272_Group_Project/cmpe272_final_project/frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import store from'../../store';import{setUser}from'../../actions/userActions';import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var SSO=/*#__PURE__*/function(_React$Component){_inherits(SSO,_React$Component);var _super=_createSuper(SSO);function SSO(props){_classCallCheck(this,SSO);return _super.call(this,props);}_createClass(SSO,[{key:\"componentDidMount\",value:function componentDidMount(){this.getIdentity();}},{key:\"getIdentity\",value:function(){var _getIdentity=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var api,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:api=\"http://localhost:5002\";_context.next=3;return fetch(api+'/useridentity',{credentials:'include'});case 3:response=_context.sent;if(!(response.status===200)){_context.next=12;break;}_context.next=7;return response.json();case 7:data=_context.sent;_context.next=10;return store.dispatch(setUser(data.user));case 10:_context.next=13;break;case 12:this.redirectToLogin();case 13:case\"end\":return _context.stop();}}},_callee,this);}));function getIdentity(){return _getIdentity.apply(this,arguments);}return getIdentity;}()},{key:\"redirectToLogin\",value:function redirectToLogin(){window.location.replace(process.env.REACT_APP_LOGIN||\"http://localhost:5002/login\");}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(_Fragment,{});}}]);return SSO;}(React.Component);export default SSO;","map":{"version":3,"names":["React","store","setUser","SSO","props","getIdentity","api","fetch","credentials","response","status","json","data","dispatch","user","redirectToLogin","window","location","replace","process","env","REACT_APP_LOGIN","Component"],"sources":["/Users/bryancaldera/CS MS/CMPE272_Group_Project/cmpe272_final_project/frontend/src/components/sso/sso.js"],"sourcesContent":["import React from 'react';\nimport store from '../../store';\nimport { setUser } from '../../actions/userActions';\n\nclass SSO extends React.Component {\n\n    constructor(props) {\n        super(props);\n    }\n    componentDidMount() {\n        this.getIdentity();\n    }\n    async getIdentity() {\n        var api = \"http://localhost:5002\";\n        const response = await fetch(api + '/useridentity', { credentials: 'include' })\n        if (response.status === 200) {\n            const data = await response.json();\n            await store.dispatch(setUser(data.user));\n        } else {\n            this.redirectToLogin();\n        }\n    }\n    redirectToLogin() {\n        window.location.replace(process.env.REACT_APP_LOGIN || \"http://localhost:5002/login\");\n    }\n\n    render() {\n        return (\n            <></>\n        )\n    }\n}\nexport default SSO;\n"],"mappings":"w9BAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,MAAOC,MAAK,KAAM,aAAa,CAC/B,OAASC,OAAO,KAAQ,2BAA2B,CAAC,mGAE9CC,IAAG,sGAEL,aAAYC,KAAK,CAAE,mDACTA,KAAK,EACf,CAAC,iDACD,4BAAoB,CAChB,IAAI,CAACC,WAAW,EAAE,CACtB,CAAC,iHACD,2JACQC,GAAG,CAAG,uBAAuB,uBACVC,MAAK,CAACD,GAAG,CAAG,eAAe,CAAE,CAAEE,WAAW,CAAE,SAAU,CAAC,CAAC,QAAzEC,QAAQ,oBACVA,QAAQ,CAACC,MAAM,GAAK,GAAG,iDACJD,SAAQ,CAACE,IAAI,EAAE,QAA5BC,IAAI,sCACJX,MAAK,CAACY,QAAQ,CAACX,OAAO,CAACU,IAAI,CAACE,IAAI,CAAC,CAAC,wCAExC,IAAI,CAACC,eAAe,EAAE,CAAC,4DAE9B,0HACD,0BAAkB,CACdC,MAAM,CAACC,QAAQ,CAACC,OAAO,CAACC,OAAO,CAACC,GAAG,CAACC,eAAe,EAAI,6BAA6B,CAAC,CACzF,CAAC,sBAED,iBAAS,CACL,mBACI,kBAAK,CAEb,CAAC,iBA1BarB,KAAK,CAACsB,SAAS,EA4BjC,cAAenB,IAAG"},"metadata":{},"sourceType":"module"}